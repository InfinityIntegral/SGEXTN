@SG_ML_COMMENT This SGML documentation file is automatically generated by _ocu_mentation, the 05524F internal documentation generation app.
@SG_ML_PAGENAME Full Tutorial Part 6
@SG_ML_TITLE Full Tutorial Part 6
@SG_ML_BLANKLINE
&#9;See @SG_ML_L004006herefull05 for the previous part of the tutorial.
&#9;In the previous part, we built the UI of the options page.
@SG_ML_BLANKLINE
@SG_ML_HEADER_ writing options page behaviour (part 1)
&#9;With the UI ready, we can write behaviour of all the UI elements. Up until now, everything in the code of SGCLPOptionsPage that expects a @SG_ML_L021015callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/callback uses nullptr as placeholder.
&#9;We will deal with the presets system later, so using and saving presets can continue to be nothing for now.
@SG_ML_BLANKLINE
&#9;Firstly we can get choosing background colours to work. The user can opt for "custom" mode where they choose a specific colour to use as background colour. There is also "complementary" mode (to demonstrate SGEXTN's colour processing capabilities) where the background colour is the foreground colour but with some HSL channels inverted.
&#9;To indicate to the user that a mode (custom / complementary) is selected, we can use @SG_ML_L01602CSGWButton::setSelected../cppclass/sgwbutton#void_setSelected_bool_ on the corresponding button.
&#9;For the options page, to hide irrelevant UI components, we resize other UI to cover them. A UI element can have its size in @SG_ML_L01A016w-distance ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/wdistance changed using @SG_ML_L010027SGWWidget::setX1../cppclass/sgwwidget#void_setX1_float_, @SG_ML_L010027SGWWidget::setX0../cppclass/sgwwidget#void_setX0_float_, @SG_ML_L010027SGWWidget::setY1../cppclass/sgwwidget#void_setY1_float_, @SG_ML_L010027SGWWidget::setY0../cppclass/sgwwidget#void_setY0_float_, @SG_ML_L010027SGWWidget::setW1../cppclass/sgwwidget#void_setW1_float_, @SG_ML_L010027SGWWidget::setW0../cppclass/sgwwidget#void_setW0_float_, @SG_ML_L010027SGWWidget::setH1../cppclass/sgwwidget#void_setH1_float_, and @SG_ML_L010027SGWWidget::setH0../cppclass/sgwwidget#void_setH0_float_.
&#9;Alternatively, you can simply disable irrelevant UI elements using @SG_ML_L01C032SGWWidget::setItemVisibility../cppclass/sgwwidget#void_setItemVisibility_bool_.
@SG_ML_BLANKLINE
&#9;When the "custom" button is pressed, we should make the "custom" button selected, resize it to reveal the colour picker below, make the "complementary" button unselected, and resize it to cover the buttons below. We also need to test if it is already selected. If so, we ignore it.
&#9;The "complementary" button follows a similar algorithm.
&#9;We write these behaviours in @SG_ML_L021015callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/callback that return void and take no arguments, so these can be attached to the buttons directly.
&#9;We can declare the functions inside the class SGCLPOptionsPage.
@SG_ML_WARN static void backgroundUseCustom();&#10;static void backgroundUseComplementary();
&#9;and then assign them to run when the buttons are pressed by replacing the lines in SGCLPOptionsPage::initialise that create the buttons. Instead of just creating the buttons, we assign the function to run also.
@SG_ML_WARN SGCLPOptionsPage::backgroundUseCustomButton = new SGWTextButton(bg, "custom", &SGCLPOptionsPage::backgroundUseCustom, 0.0f, 0.5f, 0.0f, 7.5f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;SGCLPOptionsPage::backgroundUseComplementaryButton = new SGWTextButton(bg, "complementary", &SGCLPOptionsPage::backgroundUseComplementary, 0.0f, 0.5f, 0.0f, 8.5f, 1.0f, -1.0f, 0.0f, 1.0f);
&#9;To ensure that the UI page starts at a valid default, we can write a reset function
@SG_ML_WARN static void reset();
&#9;with implementation
@SG_ML_WARN void SGCLPOptionsPage::reset(){&#10;    SGCLPOptionsPage::backgroundUseCustom();&#10;}
&#9;and then use it when creating the UI page.
@SG_ML_WARN void SGCLPOptionsPage::activate(){&#10;    SGWBackground::enable(SGCLPOptionsPage::instance, &SGCLPOptionsPage::initialise, &SGCLPOptionsPage::reset);&#10;}
&#9;After that we actually implement the functions.
@SG_ML_WARN void SGCLPOptionsPage::backgroundUseCustom(){&#10;    if((*SGCLPOptionsPage::backgroundUseCustomButton).getSelected() == true){return;}&#10;    (*SGCLPOptionsPage::backgroundUseCustomButton).setSelected(true);&#10;    (*SGCLPOptionsPage::backgroundUseComplementaryButton).setSelected(false);&#10;    (*SGCLPOptionsPage::backgroundUseCustomButton).setW1(0.5f);&#10;    (*SGCLPOptionsPage::backgroundUseCustomButton).setW0(-0.5f);&#10;    (*SGCLPOptionsPage::backgroundUseComplementaryButton).setW1(1.0f);&#10;    (*SGCLPOptionsPage::backgroundUseComplementaryButton).setW0(-1.0f);&#10;}&#10;&#10;void SGCLPOptionsPage::backgroundUseComplementary(){&#10;    if((*SGCLPOptionsPage::backgroundUseComplementaryButton).getSelected() == true){return;}&#10;    (*SGCLPOptionsPage::backgroundUseComplementaryButton).setSelected(true);&#10;    (*SGCLPOptionsPage::backgroundUseCustomButton).setSelected(false);&#10;    (*SGCLPOptionsPage::backgroundUseComplementaryButton).setW1(0.5f);&#10;    (*SGCLPOptionsPage::backgroundUseComplementaryButton).setW0(-0.5f);&#10;    (*SGCLPOptionsPage::backgroundUseCustomButton).setW1(1.0f);&#10;    (*SGCLPOptionsPage::backgroundUseCustomButton).setW0(-1.0f);&#10;}
@SG_ML_BLANKLINE
&#9;See @SG_ML_L004006herefull07 for the next part of the tutorial.
&#9;
