@SG_ML_COMMENT This SGML documentation file is automatically generated by _ocu_mentation, the 05524F internal documentation generation app.
@SG_ML_PAGENAME Full Tutorial Part 5
@SG_ML_TITLE Full Tutorial Part 5
@SG_ML_BLANKLINE
&#9;See @SG_ML_L004006herefull04 for the previous part of the tutorial.
&#9;In the previous part, we debugged and tested the introduction page.
@SG_ML_BLANKLINE
@SG_ML_HEADER_ building the options page
&#9;If we look back at our features list, we need to let the user choose how the app will display stuff. So we can build that UI page now.
&#9;Before we actually start coding, we should first plan out what the UI page should look like.
&#9;Since we want the user to see all options and not click submit without knowing that there are more things to change, we can put the submit button inside the scroll view.
&#9;The page background can then be a @SG_ML_L00D019SGWScrollView../cppclass/sgwscrollview that contains all the UI, and with the submit button at the bottom.
&#9;We can let the UI look like this, the [] indicate the type of element and the w() indicate the 0 coordinate of the @SG_ML_L01A016w-distance ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/wdistance of the top edge of the UI element from the top of the scroll view.
@SG_ML_WARN Preferences [title] w(0.5)&#10;use preset [button] w(2.5)&#10;foreground colour [label + colour picker] w(4.5)&#10;background colour (choose from below) [label] w(6.0)&#10;custom [button + colour picker] w(7.5)&#10;complementary / H / S / L [4 buttons] w(8.5)&#10;choose pattern [label] w(10.5)&#10;circle / regular polygon [2 buttons] w(12.0)&#10;star / fractal [2 buttons] w(13.0)&#10;number of sides: input [label + input field with validation] w(14.5)&#10;save current setting as preset [button] w(17.0)&#10;save preferences and continue [button] w(18.5)&#10;[end scroll view] w(20.0)
@SG_ML_BLANKLINE
&#9;Now that we know what our UI for this page should look like, we can write a function to create it. We will put this in a new class, SGCLPOptionsPage, and call the function SGCLPOptionsPage::initialise. The process of creating a class is similar to what we have done with SGCLPIntroductionPage.
&#9;Similar to last time, we also define SGCLPOptionsPage::instance to be a pointer to the page background. and SGCLPOptionsPage::activate which can be used as a @SG_ML_L021015callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/callback to turn on the page.
&#9;Do not forget to add the source file to your CMakeLists.txt.
&#9;Note that we have to store pointers to everything accepting user input, including colour pickers and selectable buttons and input fields, as we will need to retrieve this input later. Also store pointers to stuff that you will need to dynamically turn on and off.
&#9;Remember to declare all static variables in the source file, if not the linker will complain.
&#9;We can declare and implement the static member function SGCLPIntroductionPage::terminate, also used as a @SG_ML_L021015callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/callback, which turns off the introduction page and turns on the options page.
@SG_ML_WARN void SGCLPIntroductionPage::terminate(){&#10;    SGWBackground::disable(SGCLPIntroductionPage::instance);&#10;    SGCLPOptionsPage::activate();&#10;}
&#9;We then go to SGCLPIntroductionPage and change the @SG_ML_L021015callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/callback attached to the "continue" button from nullptr to &SGCLPOptionsPage::activate, like in the code below.
@SG_ML_WARN new SGWTextButton(bg, "continue", &SGCLPIntroductionPage::terminate, 0.0f, 0.0f, 1.0f, -1.0f, 1.0f, 0.0f, 0.0f, 1.0f);
&#9;It is very likely that some of the UI elements are misplaced on the first try, you can fix this easily by adjusting the @SG_ML_L01A016w-distance ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/wdistance that you entered. The proper code is presented below for you to check against your work.
@SG_ML_BLANKLINE
&#9;include/SGCLPOptionsPage.h
@SG_ML_WARN #ifndef SGCLPOPTIONSPAGE_H&#10;#define SGCLPOPTIONSPAGE_H&#10;&#10;class SGWColourPickerWidget;&#10;class SGWButton;&#10;class SGWInput;&#10;class SGWBackground;&#10;class SGCLPOptionsPage {&#10;public:&#10;    static SGWBackground* instance;&#10;    static SGWBackground* initialise();&#10;    static void activate();&#10;    static SGWColourPickerWidget* foregroundColourPicker;&#10;    static SGWButton* backgroundUseCustomButton;&#10;    static SGWColourPickerWidget* backgroundColourPicker;&#10;    static SGWButton* backgroundUseComplementaryButton;&#10;    static SGWButton* backgroundComplementaryHueButton;&#10;    static SGWButton* backgroundComplementarySaturationButton;&#10;    static SGWButton* backgroundComplementaryLightnessButton;&#10;    static SGWButton* patternCircleButton;&#10;    static SGWButton* patternPolygonButton;&#10;    static SGWButton* patternStarButton;&#10;    static SGWButton* patternFractalButton;&#10;    static SGWInput* polygonSideCountInput;&#10;};&#10;&#10;#endif // SGCLPOPTIONSPAGE_H
&#9;src/SGCLPOptionsPage.cpp
@SG_ML_WARN #include &lt;SGCLPOptionsPage.h&gt;&#10;#include &lt;SGWBackground.h&gt;&#10;#include &lt;SGWWidget.h&gt;&#10;#include &lt;SGWScrollView.h&gt;&#10;#include &lt;SGWTextLabel.h&gt;&#10;#include &lt;SGWHorizontalAlignment.h&gt;&#10;#include &lt;SGWTextButton.h&gt;&#10;#include &lt;SGWColourPickerWidget.h&gt;&#10;#include &lt;SGXColourRGBA.h&gt;&#10;#include &lt;SGWTextInput.h&gt;&#10;&#10;SGWBackground* SGCLPOptionsPage::instance = nullptr;&#10;SGWColourPickerWidget* SGCLPOptionsPage::foregroundColourPicker = nullptr;&#10;SGWButton* SGCLPOptionsPage::backgroundUseCustomButton = nullptr;&#10;SGWColourPickerWidget* SGCLPOptionsPage::backgroundColourPicker = nullptr;&#10;SGWButton* SGCLPOptionsPage::backgroundUseComplementaryButton = nullptr;&#10;SGWButton* SGCLPOptionsPage::backgroundComplementaryHueButton = nullptr;&#10;SGWButton* SGCLPOptionsPage::backgroundComplementarySaturationButton = nullptr;&#10;SGWButton* SGCLPOptionsPage::backgroundComplementaryLightnessButton = nullptr;&#10;SGWButton* SGCLPOptionsPage::patternCircleButton = nullptr;&#10;SGWButton* SGCLPOptionsPage::patternPolygonButton = nullptr;&#10;SGWButton* SGCLPOptionsPage::patternStarButton = nullptr;&#10;SGWButton* SGCLPOptionsPage::patternFractalButton = nullptr;&#10;SGWInput* SGCLPOptionsPage::polygonSideCountInput = nullptr;&#10;&#10;void SGCLPOptionsPage::activate(){&#10;    SGWBackground::enable(SGCLPOptionsPage::instance, &SGCLPOptionsPage::initialise, nullptr);&#10;}&#10;&#10;SGWBackground* SGCLPOptionsPage::initialise(){&#10;    SGWBackground* bg = new SGWScrollView(SGWWidget::parentWidget, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, 0.0f, 0.0f, 20.0f, 0.0f, 0.5f, 8);&#10;    new SGWTextLabel(bg, "Preferences", 0.0f, 0.5f, 0.0f, 0.5f, 1.0f, -1.0f, 0.0f, 1.5f, SGWHorizontalAlignment::Center, false);&#10;    new SGWTextButton(bg, "use preset", nullptr, 0.0f, 0.5f, 0.0f, 2.5f, 1.0f, -1.0f, 0.0f, 1.0f);&#10;    new SGWTextLabel(bg, "foreground colour:", 0.0f, 0.5f, 0.0f, 4.5f, 0.5f, -0.6f, 0.0f, 1.0f, SGWHorizontalAlignment::Right, false);&#10;    SGCLPOptionsPage::foregroundColourPicker = new SGWColourPickerWidget(bg, 0.5f, 0.1f, 0.0f, 4.5f, 0.5f, -0.6f, 0.0f, 1.0f, SGXColourRGBA(255, 0, 200));&#10;    new SGWTextLabel(bg, "background colour (choose from below)", 0.0f, 0.5f, 0.0f, 6.0f, 1.0f, -1.0f, 0.0f, 1.0f, SGWHorizontalAlignment::Center, false);&#10;    SGCLPOptionsPage::backgroundColourPicker = new SGWColourPickerWidget(bg, 0.5f, 0.0f, 0.0f, 7.5f, 0.5f, -0.5f, 0.0f, 1.0f, SGXColourRGBA(255, 255, 255));&#10;    SGCLPOptionsPage::backgroundUseCustomButton = new SGWTextButton(bg, "custom", nullptr, 0.0f, 0.5f, 0.0f, 7.5f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;    SGCLPOptionsPage::backgroundComplementaryHueButton = new SGWTextButton(bg, "H", nullptr, 0.5f, 0.0f, 0.0f, 8.5f, 1.0f / 6.0f, -1.0f / 6.0f, 0.0f, 1.0f);&#10;    SGCLPOptionsPage::backgroundComplementarySaturationButton = new SGWTextButton(bg, "S", nullptr, 2.0f / 3.0f, -1.0f / 6.0f, 0.0f, 8.5f, 1.0f / 6.0f, -1.0f / 6.0f, 0.0f, 1.0f);&#10;    SGCLPOptionsPage::backgroundComplementaryLightnessButton = new SGWTextButton(bg, "L", nullptr, 5.0f / 6.0f, -1.0f / 3.0f, 0.0f, 8.5f, 1.0f / 6.0f, -1.0f / 6.0f, 0.0f, 1.0f);&#10;    SGCLPOptionsPage::backgroundUseComplementaryButton = new SGWTextButton(bg, "complementary", nullptr, 0.0f, 0.5f, 0.0f, 8.5f, 1.0f, -1.0f, 0.0f, 1.0f);&#10;    new SGWTextLabel(bg, "choose pattern", 0.0f, 0.5f, 0.0f, 10.5f, 1.0f, -1.0f, 0.0f, 1.0f, SGWHorizontalAlignment::Center, false);&#10;    SGCLPOptionsPage::patternCircleButton = new SGWTextButton(bg, "circle", nullptr, 0.0f, 0.5f, 0.0f, 12.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;    SGCLPOptionsPage::patternPolygonButton = new SGWTextButton(bg, "regular polygon", nullptr, 0.5f, 0.0f, 0.0f, 12.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;    SGCLPOptionsPage::patternStarButton = new SGWTextButton(bg, "star", nullptr, 0.0f, 0.5f, 0.0f, 13.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;    SGCLPOptionsPage::patternFractalButton = new SGWTextButton(bg, "fractal", nullptr, 0.5f, 0.0f, 0.0f, 13.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;    new SGWTextLabel(bg, "number of vertices:", 0.0f, 0.5f, 0.0f, 14.5f, 0.5f, -0.6f, 0.0f, 1.0f, SGWHorizontalAlignment::Right, false);&#10;    new SGWTextLabel(bg, "(not applicable)", 0.5f, 0.1f, 0.0f, 14.5f, 0.5f, -0.6f, 0.0f, 1.0f, SGWHorizontalAlignment::Left, false);&#10;    SGCLPOptionsPage::polygonSideCountInput = new SGWTextInput(bg, nullptr, 0.5f, 0.1f, 0.0f, 14.5f, 0.5f, -0.6f, 0.0f, 1.0f);&#10;    new SGWTextButton(bg, "save current settings as preset", nullptr, 0.0f, 0.5f, 0.0f, 17.0f, 1.0f, -1.0f, 0.0f, 1.0f);&#10;    new SGWTextButton(bg, "save preferences and continue", nullptr, 0.0f, 0.5f, 0.0f, 18.5f, 1.0f, -1.0f, 0.0f, 1.0f);&#10;    return bg;&#10;}
@SG_ML_BLANKLINE
&#9;See @SG_ML_L004006herefull06 for the next part of the tutorial.
&#9;
