@SG_ML_COMMENT This SGML documentation file is automatically generated by _ocu_mentation, the 05524F internal documentation generation app.
@SG_ML_PAGENAME Full Tutorial Part 8
@SG_ML_TITLE Full Tutorial Part 8
@SG_ML_BLANKLINE
&#9;See @SG_ML_L004006herefull07 for the previous part of the tutorial.
&#9;In the previous part, we wrote behaviours for the options page buttons that control what is inverted when using complementary mode for background colour.
@SG_ML_BLANKLINE
@SG_ML_HEADER_ writing options page behaviour (part 3)
&#9;Next, we can build the pattern selection buttons. If "star" or "regular polygon" is selected, the user can customise the number of vertices that it has, so we need to show SGCLPOptionsPage::polygonSideCountInput. Otherwise there is no need to show the input field and it will be hidden to reveal the "not applicable" text below.
&#9;We can write 4 functions, 1 per button, but that is annoying.
&#9;Using what we learnt from the last part of this tutorial, we can use @SG_ML_L023046SGWButton::clickFunctionWithPointer../cppclass/sgwbutton#void_ptr_clickFunctionWithPointer_SGWButton_ptr_ to get a pointer to the button being clicked and make that selected. The problem with that is we do not know whether to hide or show the input field without keeping track of additional things...
&#9;What if there is a way to store non displayed information inside a UI element?
@SG_ML_BLANKLINE
&#9;In QWidget, we would subclass the UI element and add our own field. However, this is annoying to do once you have many types of UI elements doing various things.
&#9;In QML, we would add a property. Though that sounds like nonsense from JS and not nice at all.
&#9;SGEXTN's approach to this issue is attaching a int and a @SG_ML_L009015SGXString../cppclass/sgxstring to every interactive UI element. In this case we can use @SG_ML_L016026SGWButton::attachedInt../cppclass/sgwbutton#int_attachedInt_. We can set it to 0 if the pattern does not need a vertex count, and 1 otherwise.
&#9;Inside the @SG_ML_L021015callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/callback, we can just check @SG_ML_L016026SGWButton::attachedInt../cppclass/sgwbutton#int_attachedInt_ to determine what to do. This is simple and does not use JS nonsense.
&#9;We then can implement this.
@SG_ML_BLANKLINE
&#9;First we declare a function in SGCLPOptionsPage
@SG_ML_WARN static void patternSelect(SGWButton* x);
&#9;Then when creating the buttons, not only do we set the associated @SG_ML_L021015callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾../tutorials/callback, we also set the @SG_ML_L016026SGWButton::attachedInt../cppclass/sgwbutton#int_attachedInt_.
@SG_ML_WARN SGCLPOptionsPage::patternCircleButton = new SGWTextButton(bg, "circle", nullptr, 0.0f, 0.5f, 0.0f, 12.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;(*SGCLPOptionsPage::patternCircleButton).clickFunctionWithPointer = &SGCLPOptionsPage::patternSelect;&#10;(*SGCLPOptionsPage::patternCircleButton).attachedInt = 0;&#10;SGCLPOptionsPage::patternPolygonButton = new SGWTextButton(bg, "regular polygon", nullptr, 0.5f, 0.0f, 0.0f, 12.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;(*SGCLPOptionsPage::patternPolygonButton).clickFunctionWithPointer = &SGCLPOptionsPage::patternSelect;&#10;(*SGCLPOptionsPage::patternPolygonButton).attachedInt = 1;&#10;SGCLPOptionsPage::patternStarButton = new SGWTextButton(bg, "star", nullptr, 0.0f, 0.5f, 0.0f, 13.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;(*SGCLPOptionsPage::patternStarButton).clickFunctionWithPointer = &SGCLPOptionsPage::patternSelect;&#10;(*SGCLPOptionsPage::patternStarButton).attachedInt = 1;&#10;SGCLPOptionsPage::patternFractalButton = new SGWTextButton(bg, "fractal", nullptr, 0.5f, 0.0f, 0.0f, 13.0f, 0.5f, -0.5f, 0.0f, 1.0f);&#10;(*SGCLPOptionsPage::patternFractalButton).clickFunctionWithPointer = &SGCLPOptionsPage::patternSelect;&#10;(*SGCLPOptionsPage::patternFractalButton).attachedInt = 0;
&#9;We make sure the default is circle by setting that in SGCLPOptionsPage::reset
@SG_ML_WARN SGCLPOptionsPage::patternSelect(SGCLPOptionsPage::patternCircleButton);
&#9;Then we finally actually implement the function.
@SG_ML_WARN void SGCLPOptionsPage::patternSelect(SGWButton *x){&#10;    (*SGCLPOptionsPage::patternCircleButton).setSelected(false);&#10;    (*SGCLPOptionsPage::patternPolygonButton).setSelected(false);&#10;    (*SGCLPOptionsPage::patternStarButton).setSelected(false);&#10;    (*SGCLPOptionsPage::patternFractalButton).setSelected(false);&#10;    (*x).setSelected(true);&#10;    if((*x).attachedInt == 0){(*SGCLPOptionsPage::polygonSideCountInput).setItemVisibility(false);}&#10;    else{(*SGCLPOptionsPage::polygonSideCountInput).setItemVisibility(true);}&#10;}
&#9;Testing that shows that it works.
@SG_ML_BLANKLINE
&#9;See @SG_ML_L004006herefull09 for the next part of the tutorial.
&#9;
