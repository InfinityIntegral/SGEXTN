# CMake file for SGEXTN

cmake_minimum_required(VERSION 3.30.5 FATAL_ERROR)

set_property(GLOBAL PROPERTY CMAKE_ERROR_DEPRECATED ON)
set_property(GLOBAL PROPERTY CMAKE_EXPORT_COMPILE_COMMANDS ON)
set_property(GLOBAL PROPERTY CMAKE_SHARED_LIBRARY_ENABLE_EXPORTS ON)
set_property(GLOBAL PROPERTY CMAKE_AUTOGEN_PARALLEL ON)
set_property(GLOBAL PROPERTY CMAKE_AUTOMOC ON)
set_property(GLOBAL PROPERTY CMAKE_AUTORCC ON)
if(APPLE)
    set_property(GLOBAL PROPERTY CMAKE_BUILD_RPATH "@loader_path")
elseif(UNIX)
    set_property(GLOBAL PROPERTY CMAKE_BUILD_RPATH "$ORIGIN")
endif()
set_property(GLOBAL PROPERTY CMAKE_BUILD_RPATH_USE_ORIGIN ON)
set_property(GLOBAL PROPERTY CMAKE_INCLUDE_CURRENT_DIR OFF)
set_property(GLOBAL PROPERTY CMAKE_INCLUDE_CURRENT_DIR_IN_INTERFACE OFF)
set_property(GLOBAL PROPERTY CMAKE_OPTIMIZE_DEPENDENCIES ON)
set_property(GLOBAL PROPERTY CMAKE_POSITION_INDEPENDENT_CODE ON)
set_property(GLOBAL PROPERTY CMAKE_VISIBILITY_INLINES_HIDDEN ON)
set_property(GLOBAL PROPERTY CMAKE_CXX_EXTENSIONS OFF)
set_property(GLOBAL PROPERTY CMAKE_CXX_STANDARD 20)
set_property(GLOBAL PROPERTY CMAKE_CXX_STANDARD_REQUIRED ON)

set_property(DIRECTORY . PROPERTY GLOBAL_DEPENDS_NO_CYCLES ON)
set_property(DIRECTORY . PROPERTY REPORT_UNDEFINED_PROPERTIES ON)
set_property(DIRECTORY . PROPERTY TARGET_SUPPORTS_SHARED_LIBS ON)

if(CMAKE_BUILD_TYPE STREQUAL "Debug")
    message("building in DEBUG mode, this should NOT be released")
endif()

project(SGEXTN VERSION 6.0.0 LANGUAGES CXX)

add_executable(InternalTest WIN32
    private_api/SG_DLL.h)
target_compile_definitions(InternalTest PRIVATE SG_BUILDING_INTERNALTEST)
target_include_directories(InternalTest
    PRIVATE "private_api"
    PUBLIC "internal_test/include"
)
target_sources(InternalTest
    PRIVATE "internal_test/src/main.cpp"
)
